{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Visual%20studio%20code/CocaCola/ColaFE/src/components/ThreeViewer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/Addons.js\";\r\nimport { GLTFLoader } from \"three/examples/jsm/Addons.js\";\r\n\r\ntype Props = {\r\n  modelUrl: string;\r\n};\r\n\r\nexport default function ThreeViewer({ modelUrl }: Props) {\r\n  const [error, setError] = React.useState<string | null>(null);\r\n  const mountRef = useRef<HTMLDivElement>(null);\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center w-full h-full text-red-500 p-4 border border-red-500\">\r\n        {error}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!mountRef.current) return;\r\n\r\n    /* Scene */\r\n    const scene = new THREE.Scene();\r\n    scene.background = null;\r\n    const envTexture = new THREE.DataTexture(\r\n      new Uint8Array([255, 255, 255]),\r\n      1,\r\n      1,\r\n      THREE.RGBFormat\r\n    );\r\n    envTexture.needsUpdate = true;\r\n\r\n    scene.environment = envTexture;\r\n    /* Camera */\r\n    const camera = new THREE.PerspectiveCamera(\r\n      45,\r\n      mountRef.current.clientWidth / mountRef.current.clientHeight,\r\n      0.1,\r\n      100\r\n    );\r\n    camera.position.set(0, 0, 3);\r\n\r\n    /* Renderer */\r\n    const renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n      alpha: true,\r\n    });\r\n    renderer.setSize(\r\n      mountRef.current.clientWidth,\r\n      mountRef.current.clientHeight\r\n    );\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    mountRef.current.appendChild(renderer.domElement);\r\n    renderer.outputColorSpace = THREE.SRGBColorSpace;\r\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\r\n    renderer.toneMappingExposure = 1;\r\n\r\n    /* Lights */\r\n    scene.add(new THREE.AmbientLight(0xffffff, 1.2));\r\n    const dirLight = new THREE.DirectionalLight(0xffffff, 1);\r\n    dirLight.position.set(5, 5, 5);\r\n    scene.add(dirLight);\r\n\r\n    /* Controls (rotate only) */\r\n    const controls = new (OrbitControls as any)(camera, renderer.domElement);\r\n    controls.enableZoom = false;\r\n    controls.enablePan = false;\r\n    controls.autoRotate = false;\r\n\r\n    const testCube = new THREE.Mesh(\r\n      new THREE.BoxGeometry(1, 1, 1),\r\n      new THREE.MeshStandardMaterial({ color: \"red\" })\r\n    );\r\n    scene.add(testCube);\r\n\r\n    /* Load GLTF */\r\n    const loader = new GLTFLoader();\r\n    let model: THREE.Object3D;\r\n\r\n    loader.load(\r\n      modelUrl,\r\n      (gltf) => {\r\n        model = gltf.scene;\r\n\r\n        /* ðŸ”¥ Auto-scale to fit */\r\n        const box = new THREE.Box3().setFromObject(model);\r\n        const size = box.getSize(new THREE.Vector3()).length();\r\n        const center = box.getCenter(new THREE.Vector3());\r\n\r\n        console.log(\"Model loaded. Size:\", size, \"Center:\", center);\r\n\r\n        if (size === 0) {\r\n          console.error(\"Model has 0 size. Check if it contains meshes.\");\r\n        }\r\n\r\n        model.position.sub(center);\r\n        const scale = 1.5 / size || 1; // Avoid divide by zero\r\n        model.scale.setScalar(scale);\r\n\r\n        scene.add(model);\r\n\r\n        console.log(\"load model successfully \" + model.name + \"-\" + scale);\r\n      },\r\n      (xhr) => {\r\n        console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\r\n      },\r\n      (error) => {\r\n        console.error(\"An error happened loading the model:\", error);\r\n        setError(\"Error loading model: \" + (error as Error).message);\r\n      }\r\n    );\r\n\r\n    /* Animation */\r\n    const animate = () => {\r\n      requestAnimationFrame(animate);\r\n      controls.update();\r\n      renderer.render(scene, camera);\r\n    };\r\n    animate();\r\n\r\n    /* Resize */\r\n    const onResize = () => {\r\n      if (!mountRef.current) return;\r\n      camera.aspect =\r\n        mountRef.current.clientWidth / mountRef.current.clientHeight;\r\n      camera.updateProjectionMatrix();\r\n      renderer.setSize(\r\n        mountRef.current.clientWidth,\r\n        mountRef.current.clientHeight\r\n      );\r\n    };\r\n    window.addEventListener(\"resize\", onResize);\r\n\r\n    /* Cleanup */\r\n    return () => {\r\n      window.removeEventListener(\"resize\", onResize);\r\n      renderer.dispose();\r\n      mountRef.current?.removeChild(renderer.domElement);\r\n    };\r\n  }, [modelUrl]);\r\n\r\n  return <div ref={mountRef} className=\"w-full h-full\" />;\r\n}\r\n"],"names":[],"mappings":"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"}}]
}